define(function(require,exports,module){require("validate-methods"),require("datetimepicker"),require("fileupload");var e=require("TMS");$(function(){function a(a,t,o){var l="hover";return e.isPC()&&(l="focus"),['<a class="set" data-id='+t.id+' href="javascript:void(0)"  data-html="true" data-trigger="'+l+'"  data-toggle="popover" data-placement="left" >','<i class="glyphicon glyphicon-cog"></i>',"</a>"].join("")}e.init(),$(".toggle-button").click(function(){var e=$(this).attr("data-target");$(e).toggle(),$(this).find(".toggle-icon").toggleClass("icondown"),$(this).parents(".panel").hasClass("panel-primary")?$(this).parents(".panel").removeClass("panel-primary").addClass("panel-default"):$(this).parents(".panel").removeClass("panel-default").addClass("panel-primary")}),$(".file").change(function(e){var a=$(this).attr("data-target");$(a).val(e.target.files[0].name)}),$("#form1").validate({debug:!0,submitHandler:function(e){console.log("验证成功")}}),$(".form_datetime").datetimepicker({autoclose:!0,minView:2,container:".body-content"}),e.bootTable("#table",{url:"/static/js/data1.json",columns:[{field:"userName",title:"userName",sortable:!0},{field:"userFullName",title:"userFullName",sortable:!0},{field:"email",title:"email",sortable:!0},{field:"organizationName",title:"organizationName",sortable:!0},{field:"ss",title:"操作",formatter:a}],queryParamsType:"",sidePagination:"server",queryParams:function(e){return console.log(e),e},detailView:!0,detailFormatter:function(e,a){console.log(e,a);var t=[];return $.each(a,function(e,a){t.push("<p><b>"+e+":</b> "+a+"</p>")}),t.join("")},responseHandler:function(e){return this.data=e.items,e.total=e.totalCount,e},sortName:"userName",sortOrder:"asc",pagination:!0,search:!0,searchOnEnterKey:!0}),$("#table").on("load-success.bs.table",function(){$(".set").popover({content:'<ul class="list-inline" style="margin-bottom:0px"><li><i class="glyphicon glyphicon-wrench" title="Delpoy"></i></li><li class="modal-del"><i class="glyphicon glyphicon-trash" ></i></li><li><i class="glyphicon glyphicon-share-alt"></i></li><li><i class="glyphicon glyphicon-plus"></i></li></ul>',container:".body-content"}).on("shown.bs.popover",function(){console.log($(this).attr("data-id"));$(".modal-del").unbind().bind("click",function(){$("#myModal").modal()})})}),$("#fileupload").fileupload({dataType:"json",autoUpload:!1,recalculateProgress:!1,dropZone:$("#none"),formData:function(e){return{}},add:function(a,t){$.each(t.files,function(a,o){var l=[];if($("#file").val(o.name),0==l.length){var i=new FileReader;i.readAsArrayBuffer(o),i.onload=function(){t.submit()},i.onerror=function(){e.alert("Package file is a folder","danger")}}})},done:function(e,a){},fail:function(a,t){e.alert("fail","danger"),$("#file").val("")},progress:function(e,a){console.log(a.files[0].name,a.loaded,a.total)},progressall:function(e,a){var t=parseInt(a.loaded/a.total*100,10);console.log("progressall",a.loaded,a.total),$(".progress .progress-bar").css("width",t+"%")},start:function(e){console.log("开始"),$(".progress").removeClass("hide")},always:function(e,a){console.log("结束")},stop:function(){console.log("finished"),setTimeout(function(){$(".progress").addClass("hide"),$(".progress .progress-bar").css("width","0%")},500)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")})});